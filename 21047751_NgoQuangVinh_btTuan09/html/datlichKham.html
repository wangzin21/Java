<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt lịch khám online</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="../css/index.css">
</head>

<body>
    <div class="container text-center">
        <header class="text-center">
            <h3 class="text-primary">Tư vấn online</h3>
        </header>
        <nav>
            <ul class="row m-2">
                <li class="text-center mr-5"><a href="">Trang chủ</a></li>
                <li>
                    <button class="btn btn-primary" data-toggle='modal' data-target='#frm'>open form</button>
                </li>
            </ul>
        </nav>
        <div class="content">
            <table id="t-data" class="col-12">
                <thead>
                    <tr>
                        <th>STT</th>
                        <th>Mã bệnh nhân</th>
                        <th>Mật khẩu</th>
                        <th>img</th>
                        <th>Ngày khám</th>
                        <th>Phụ thu dịch vụ</th>
                        <th>Chuyên khoa</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <footer class="mt-5">
            <h4>21047751-Ngô Quang Vinh</h4>
        </footer>
    </div>
    <div class="modal" id="frm">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form action="" class="p-5">
                    <div class="mod-header">
                        <div class="row mt-2 mb-2 border border-top-0 border-right-0 border-left-0">
                            <div class="col-11">
                                <h2>Đặt lịch khám online</h2>
                            </div>
                            <div class="col-1" aria-hidden="true">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="mod-content">
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">mã bệnh nhân</label>
                            </div>
                            <div class="col-12">
                                <input type="text" id="txtMa" class="form-control" placeholder="mã bệnh nhân "
                                    onblur="ktma()">
                            </div>
                            <div class="col-12">
                                <span id="er1" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">Mật Khẩu</label>
                            </div>
                            <div class="col-12 text-left">
                                <input type="password" class="form-control" id="txtPw" placeholder="Mật khẩu"
                                    onblur="ktpw()">
                            </div>
                            <div class="col-12 text-left">
                                <span id="er2" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">Ngày khám</label>
                            </div>
                            <div class="col-12 text-left">
                                <input type="date" id="ngaykham" class="form-control" placeholder="mm/dd/yyyy"
                                    onblur="ktday()">
                            </div>
                            <div class="col-12 text-left">
                                <span id="er3" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">chon img</label>
                            </div>
                            <div class="col-12 text-left">
                                <input type="file" id="txtimg" class="form-control">
                            </div>
                            <div class="col-12 text-left">
                                <span id="er12" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">Loại dịch vụ</label>
                            </div>
                            <div id="div_cb" class="col-12 text-left">
                            
                                <input type="checkbox" class="mycheckbox" name="check01" id="cb_1" value="500000">
                                <label for="cb_1">Khám bệnh theo yêu cầu</label>
                                <input type="checkbox" class="mycheckbox" name="check01" id="cb_2" value="500000">
                                <label for="cb_2">Điều trị ngoại trú</label>
                                <input type="checkbox" class="mycheckbox" name="check01" id="cb_3" value="500000">
                                <label for="cb_3">Bác sĩ theo yêu cầu</label>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col-12 text-left">
                                <label for="">Chuyên khoa</label>
                            </div>
                            <div class="col-12 text-left">
                                <select class="form-control" name="" id="chuyenkhoa">
                                    <option value="Ngoại tổng quát">Ngoại tổng quát</option>
                                    <option value="Nội tổng quát">Nội tổng quát</option>
                                    <option value="Nhi">Nhi</option>
                                </select>
                            </div>
                            <div class="col-12 text-left">
                                <span id="er5" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row mb-2 text-center">
                            <div class="col-12">
                                <input id="btnsubmit" type="button" class="btn btn-success" value="Đặt lịch">
                            </div>
                        </div>
                    </div>
                    <div class="mod-footer">
                        <div class="row text-right">
                            <div class="col">
                                <input id="close" data-dismiss="modal" type="button" class="btn btn-primary" value="Close">
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        function ktma() {
            let userid = document.getElementById('txtMa').value;
            var er = document.getElementById('er1');
            let pattern = /^[0-9]{3}$/;
            if (pattern.test(userid)) {
                er.innerHTML = '';
                return true;
            }
            else {
                er.innerHTML = '(*)BN-YYYYYY';
                return false;
            }
        }
        function ktpw() {
            let pw = document.getElementById('txtPw').value;
            var er = document.getElementById('er2');
            let pattern = /^[a-zA-Z0-9.]{5,20}$/;
            if (pattern.test(pw)) {
                er.innerHTML = '';
                return true;
            }
            else {
                er.innerHTML = '(*)';
                return false;
            }
        }
        function ktday() {
            let birth = document.getElementById('ngaykham').value;
            var x = new Date(birth)
            var d = new Date();
            var er = document.getElementById('er3');
            if (d < x) {
                er.innerHTML = '';
                return true;
            }
            else {
                er.innerHTML = '*';
                return false;
            }
        }
        var i = 0;
        $('#btnsubmit').click(function () {
            if (!ktma() || !ktpw() || !ktday()) {
                $("#er5").html("mời bạn nhập đúng và đầy đủ thông tin");
                return false;
            }
            else {
                var id = $('#txtMa').val();
                var mk = $('#txtPw').val();
                var day = $('#ngaykham').val();
                var checkedCount = $('.mycheckbox:checked').length;
                var img = $('#txtimg').val().substring(12);
                var selectedOptionValue = $("#chuyenkhoa option:selected").val();
                var them = "<tr><td>" + (i++) + "</td><td>" + id + "</td><td>" + mk + "</td><td>" + img + "</td><td>"+ day + "</td><td>" + checkedCount*500000 +"</td><td>"  +selectedOptionValue  + "</td></tr>";
                $('#t-data tbody').append(them);
                $("#er5").html("");
                return true;
            }
        });
    </script>
</body>

</html>